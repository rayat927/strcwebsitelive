{"ast":null,"code":"import firebase from '@firebase/app-compat';\nimport { FirestoreError, Bytes, _isBase64Available, enableIndexedDbPersistence, enableMultiTabIndexedDbPersistence, clearIndexedDbPersistence, _DatabaseId, _logWarn, connectFirestoreEmulator, enableNetwork, disableNetwork, _validateIsNotUsedTogether, waitForPendingWrites, onSnapshotsInSync, collection, doc, collectionGroup, runTransaction, ensureFirestoreConfigured, WriteBatch as WriteBatch$1, executeWrite, loadBundle, namedQuery, _cast, DocumentReference as DocumentReference$1, DocumentSnapshot as DocumentSnapshot$1, _DocumentKey, refEqual, setDoc, updateDoc, deleteDoc, onSnapshot, getDocFromCache, getDocFromServer, getDoc, snapshotEqual, query, where, orderBy, limit, limitToLast, startAt, startAfter, endBefore, endAt, queryEqual, getDocsFromCache, getDocsFromServer, getDocs, QuerySnapshot as QuerySnapshot$1, addDoc, AbstractUserDataWriter, setLogLevel as setLogLevel$1, QueryDocumentSnapshot as QueryDocumentSnapshot$1, _debugAssert, FieldPath as FieldPath$1, _FieldPath, serverTimestamp, deleteField, arrayUnion, arrayRemove, increment, GeoPoint, Timestamp, CACHE_SIZE_UNLIMITED } from '@firebase/firestore';\nimport { getModularInstance } from '@firebase/util';\nimport { Component } from '@firebase/component';\nconst name = \"@firebase/firestore-compat\";\nconst version = \"0.1.13\";\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nfunction validateSetOptions(methodName, options) {\n  if (options === undefined) {\n    return {\n      merge: false\n    };\n  }\n\n  if (options.mergeFields !== undefined && options.merge !== undefined) {\n    throw new FirestoreError('invalid-argument', `Invalid options passed to function ${methodName}(): You cannot ` + 'specify both \"merge\" and \"mergeFields\".');\n  }\n\n  return options;\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/** Helper function to assert Uint8Array is available at runtime. */\n\n\nfunction assertUint8ArrayAvailable() {\n  if (typeof Uint8Array === 'undefined') {\n    throw new FirestoreError('unimplemented', 'Uint8Arrays are not available in this environment.');\n  }\n}\n/** Helper function to assert Base64 functions are available at runtime. */\n\n\nfunction assertBase64Available() {\n  if (!_isBase64Available()) {\n    throw new FirestoreError('unimplemented', 'Blobs are unavailable in Firestore in this environment.');\n  }\n}\n/** Immutable class holding a blob (binary data) */\n\n\nclass Blob {\n  constructor(_delegate) {\n    this._delegate = _delegate;\n  }\n\n  static fromBase64String(base64) {\n    assertBase64Available();\n    return new Blob(Bytes.fromBase64String(base64));\n  }\n\n  static fromUint8Array(array) {\n    assertUint8ArrayAvailable();\n    return new Blob(Bytes.fromUint8Array(array));\n  }\n\n  toBase64() {\n    assertBase64Available();\n    return this._delegate.toBase64();\n  }\n\n  toUint8Array() {\n    assertUint8ArrayAvailable();\n    return this._delegate.toUint8Array();\n  }\n\n  isEqual(other) {\n    return this._delegate.isEqual(other._delegate);\n  }\n\n  toString() {\n    return 'Blob(base64: ' + this.toBase64() + ')';\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction isPartialObserver(obj) {\n  return implementsAnyMethods(obj, ['next', 'error', 'complete']);\n}\n/**\r\n * Returns true if obj is an object and contains at least one of the specified\r\n * methods.\r\n */\n\n\nfunction implementsAnyMethods(obj, methods) {\n  if (typeof obj !== 'object' || obj === null) {\n    return false;\n  }\n\n  const object = obj;\n\n  for (const method of methods) {\n    if (method in object && typeof object[method] === 'function') {\n      return true;\n    }\n  }\n\n  return false;\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * The persistence provider included with the full Firestore SDK.\r\n */\n\n\nclass IndexedDbPersistenceProvider {\n  enableIndexedDbPersistence(firestore, forceOwnership) {\n    return enableIndexedDbPersistence(firestore._delegate, {\n      forceOwnership\n    });\n  }\n\n  enableMultiTabIndexedDbPersistence(firestore) {\n    return enableMultiTabIndexedDbPersistence(firestore._delegate);\n  }\n\n  clearIndexedDbPersistence(firestore) {\n    return clearIndexedDbPersistence(firestore._delegate);\n  }\n\n}\n/**\r\n * Compat class for Firestore. Exposes Firestore Legacy API, but delegates\r\n * to the functional API of firestore-exp.\r\n */\n\n\nclass Firestore {\n  constructor(databaseIdOrApp, _delegate, _persistenceProvider) {\n    this._delegate = _delegate;\n    this._persistenceProvider = _persistenceProvider;\n    this.INTERNAL = {\n      delete: () => this.terminate()\n    };\n\n    if (!(databaseIdOrApp instanceof _DatabaseId)) {\n      this._appCompat = databaseIdOrApp;\n    }\n  }\n\n  get _databaseId() {\n    return this._delegate._databaseId;\n  }\n\n  settings(settingsLiteral) {\n    const currentSettings = this._delegate._getSettings();\n\n    if (!settingsLiteral.merge && currentSettings.host !== settingsLiteral.host) {\n      _logWarn('You are overriding the original host. If you did not intend ' + 'to override your settings, use {merge: true}.');\n    }\n\n    if (settingsLiteral.merge) {\n      settingsLiteral = Object.assign(Object.assign({}, currentSettings), settingsLiteral); // Remove the property from the settings once the merge is completed\n\n      delete settingsLiteral.merge;\n    }\n\n    this._delegate._setSettings(settingsLiteral);\n  }\n\n  useEmulator(host, port) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    connectFirestoreEmulator(this._delegate, host, port, options);\n  }\n\n  enableNetwork() {\n    return enableNetwork(this._delegate);\n  }\n\n  disableNetwork() {\n    return disableNetwork(this._delegate);\n  }\n\n  enablePersistence(settings) {\n    let synchronizeTabs = false;\n    let experimentalForceOwningTab = false;\n\n    if (settings) {\n      synchronizeTabs = !!settings.synchronizeTabs;\n      experimentalForceOwningTab = !!settings.experimentalForceOwningTab;\n\n      _validateIsNotUsedTogether('synchronizeTabs', synchronizeTabs, 'experimentalForceOwningTab', experimentalForceOwningTab);\n    }\n\n    return synchronizeTabs ? this._persistenceProvider.enableMultiTabIndexedDbPersistence(this) : this._persistenceProvider.enableIndexedDbPersistence(this, experimentalForceOwningTab);\n  }\n\n  clearPersistence() {\n    return this._persistenceProvider.clearIndexedDbPersistence(this);\n  }\n\n  terminate() {\n    if (this._appCompat) {\n      this._appCompat._removeServiceInstance('firestore-compat');\n\n      this._appCompat._removeServiceInstance('firestore');\n    }\n\n    return this._delegate._delete();\n  }\n\n  waitForPendingWrites() {\n    return waitForPendingWrites(this._delegate);\n  }\n\n  onSnapshotsInSync(arg) {\n    return onSnapshotsInSync(this._delegate, arg);\n  }\n\n  get app() {\n    if (!this._appCompat) {\n      throw new FirestoreError('failed-precondition', \"Firestore was not initialized using the Firebase SDK. 'app' is \" + 'not available');\n    }\n\n    return this._appCompat;\n  }\n\n  collection(pathString) {\n    try {\n      return new CollectionReference(this, collection(this._delegate, pathString));\n    } catch (e) {\n      throw replaceFunctionName(e, 'collection()', 'Firestore.collection()');\n    }\n  }\n\n  doc(pathString) {\n    try {\n      return new DocumentReference(this, doc(this._delegate, pathString));\n    } catch (e) {\n      throw replaceFunctionName(e, 'doc()', 'Firestore.doc()');\n    }\n  }\n\n  collectionGroup(collectionId) {\n    try {\n      return new Query(this, collectionGroup(this._delegate, collectionId));\n    } catch (e) {\n      throw replaceFunctionName(e, 'collectionGroup()', 'Firestore.collectionGroup()');\n    }\n  }\n\n  runTransaction(updateFunction) {\n    return runTransaction(this._delegate, transaction => updateFunction(new Transaction(this, transaction)));\n  }\n\n  batch() {\n    ensureFirestoreConfigured(this._delegate);\n    return new WriteBatch(new WriteBatch$1(this._delegate, mutations => executeWrite(this._delegate, mutations)));\n  }\n\n  loadBundle(bundleData) {\n    return loadBundle(this._delegate, bundleData);\n  }\n\n  namedQuery(name) {\n    return namedQuery(this._delegate, name).then(expQuery => {\n      if (!expQuery) {\n        return null;\n      }\n\n      return new Query(this, // We can pass `expQuery` here directly since named queries don't have a UserDataConverter.\n      // Otherwise, we would have to create a new ExpQuery and pass the old UserDataConverter.\n      expQuery);\n    });\n  }\n\n}\n\nclass UserDataWriter extends AbstractUserDataWriter {\n  constructor(firestore) {\n    super();\n    this.firestore = firestore;\n  }\n\n  convertBytes(bytes) {\n    return new Blob(new Bytes(bytes));\n  }\n\n  convertReference(name) {\n    const key = this.convertDocumentKey(name, this.firestore._databaseId);\n    return DocumentReference.forKey(key, this.firestore,\n    /* converter= */\n    null);\n  }\n\n}\n\nfunction setLogLevel(level) {\n  setLogLevel$1(level);\n}\n/**\r\n * A reference to a transaction.\r\n */\n\n\nclass Transaction {\n  constructor(_firestore, _delegate) {\n    this._firestore = _firestore;\n    this._delegate = _delegate;\n    this._userDataWriter = new UserDataWriter(_firestore);\n  }\n\n  get(documentRef) {\n    const ref = castReference(documentRef);\n    return this._delegate.get(ref).then(result => new DocumentSnapshot(this._firestore, new DocumentSnapshot$1(this._firestore._delegate, this._userDataWriter, result._key, result._document, result.metadata, ref.converter)));\n  }\n\n  set(documentRef, data, options) {\n    const ref = castReference(documentRef);\n\n    if (options) {\n      validateSetOptions('Transaction.set', options);\n\n      this._delegate.set(ref, data, options);\n    } else {\n      this._delegate.set(ref, data);\n    }\n\n    return this;\n  }\n\n  update(documentRef, dataOrField, value) {\n    for (var _len = arguments.length, moreFieldsAndValues = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n      moreFieldsAndValues[_key - 3] = arguments[_key];\n    }\n\n    const ref = castReference(documentRef);\n\n    if (arguments.length === 2) {\n      this._delegate.update(ref, dataOrField);\n    } else {\n      this._delegate.update(ref, dataOrField, value, ...moreFieldsAndValues);\n    }\n\n    return this;\n  }\n\n  delete(documentRef) {\n    const ref = castReference(documentRef);\n\n    this._delegate.delete(ref);\n\n    return this;\n  }\n\n}\n\nclass WriteBatch {\n  constructor(_delegate) {\n    this._delegate = _delegate;\n  }\n\n  set(documentRef, data, options) {\n    const ref = castReference(documentRef);\n\n    if (options) {\n      validateSetOptions('WriteBatch.set', options);\n\n      this._delegate.set(ref, data, options);\n    } else {\n      this._delegate.set(ref, data);\n    }\n\n    return this;\n  }\n\n  update(documentRef, dataOrField, value) {\n    for (var _len2 = arguments.length, moreFieldsAndValues = new Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n      moreFieldsAndValues[_key2 - 3] = arguments[_key2];\n    }\n\n    const ref = castReference(documentRef);\n\n    if (arguments.length === 2) {\n      this._delegate.update(ref, dataOrField);\n    } else {\n      this._delegate.update(ref, dataOrField, value, ...moreFieldsAndValues);\n    }\n\n    return this;\n  }\n\n  delete(documentRef) {\n    const ref = castReference(documentRef);\n\n    this._delegate.delete(ref);\n\n    return this;\n  }\n\n  commit() {\n    return this._delegate.commit();\n  }\n\n}\n/**\r\n * Wraps a `PublicFirestoreDataConverter` translating the types from the\r\n * experimental SDK into corresponding types from the Classic SDK before passing\r\n * them to the wrapped converter.\r\n */\n\n\nclass FirestoreDataConverter {\n  constructor(_firestore, _userDataWriter, _delegate) {\n    this._firestore = _firestore;\n    this._userDataWriter = _userDataWriter;\n    this._delegate = _delegate;\n  }\n\n  fromFirestore(snapshot, options) {\n    const expSnapshot = new QueryDocumentSnapshot$1(this._firestore._delegate, this._userDataWriter, snapshot._key, snapshot._document, snapshot.metadata,\n    /* converter= */\n    null);\n    return this._delegate.fromFirestore(new QueryDocumentSnapshot(this._firestore, expSnapshot), options !== null && options !== void 0 ? options : {});\n  }\n\n  toFirestore(modelObject, options) {\n    if (!options) {\n      return this._delegate.toFirestore(modelObject);\n    } else {\n      return this._delegate.toFirestore(modelObject, options);\n    }\n  } // Use the same instance of `FirestoreDataConverter` for the given instances\n  // of `Firestore` and `PublicFirestoreDataConverter` so that isEqual() will\n  // compare equal for two objects created with the same converter instance.\n\n\n  static getInstance(firestore, converter) {\n    const converterMapByFirestore = FirestoreDataConverter.INSTANCES;\n    let untypedConverterByConverter = converterMapByFirestore.get(firestore);\n\n    if (!untypedConverterByConverter) {\n      untypedConverterByConverter = new WeakMap();\n      converterMapByFirestore.set(firestore, untypedConverterByConverter);\n    }\n\n    let instance = untypedConverterByConverter.get(converter);\n\n    if (!instance) {\n      instance = new FirestoreDataConverter(firestore, new UserDataWriter(firestore), converter);\n      untypedConverterByConverter.set(converter, instance);\n    }\n\n    return instance;\n  }\n\n}\n\nFirestoreDataConverter.INSTANCES = new WeakMap();\n/**\r\n * A reference to a particular document in a collection in the database.\r\n */\n\nclass DocumentReference {\n  constructor(firestore, _delegate) {\n    this.firestore = firestore;\n    this._delegate = _delegate;\n    this._userDataWriter = new UserDataWriter(firestore);\n  }\n\n  static forPath(path, firestore, converter) {\n    if (path.length % 2 !== 0) {\n      throw new FirestoreError('invalid-argument', 'Invalid document reference. Document ' + 'references must have an even number of segments, but ' + `${path.canonicalString()} has ${path.length}`);\n    }\n\n    return new DocumentReference(firestore, new DocumentReference$1(firestore._delegate, converter, new _DocumentKey(path)));\n  }\n\n  static forKey(key, firestore, converter) {\n    return new DocumentReference(firestore, new DocumentReference$1(firestore._delegate, converter, key));\n  }\n\n  get id() {\n    return this._delegate.id;\n  }\n\n  get parent() {\n    return new CollectionReference(this.firestore, this._delegate.parent);\n  }\n\n  get path() {\n    return this._delegate.path;\n  }\n\n  collection(pathString) {\n    try {\n      return new CollectionReference(this.firestore, collection(this._delegate, pathString));\n    } catch (e) {\n      throw replaceFunctionName(e, 'collection()', 'DocumentReference.collection()');\n    }\n  }\n\n  isEqual(other) {\n    other = getModularInstance(other);\n\n    if (!(other instanceof DocumentReference$1)) {\n      return false;\n    }\n\n    return refEqual(this._delegate, other);\n  }\n\n  set(value, options) {\n    options = validateSetOptions('DocumentReference.set', options);\n\n    try {\n      if (options) {\n        return setDoc(this._delegate, value, options);\n      } else {\n        return setDoc(this._delegate, value);\n      }\n    } catch (e) {\n      throw replaceFunctionName(e, 'setDoc()', 'DocumentReference.set()');\n    }\n  }\n\n  update(fieldOrUpdateData, value) {\n    for (var _len3 = arguments.length, moreFieldsAndValues = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n      moreFieldsAndValues[_key3 - 2] = arguments[_key3];\n    }\n\n    try {\n      if (arguments.length === 1) {\n        return updateDoc(this._delegate, fieldOrUpdateData);\n      } else {\n        return updateDoc(this._delegate, fieldOrUpdateData, value, ...moreFieldsAndValues);\n      }\n    } catch (e) {\n      throw replaceFunctionName(e, 'updateDoc()', 'DocumentReference.update()');\n    }\n  }\n\n  delete() {\n    return deleteDoc(this._delegate);\n  }\n\n  onSnapshot() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    const options = extractSnapshotOptions(args);\n    const observer = wrapObserver(args, result => new DocumentSnapshot(this.firestore, new DocumentSnapshot$1(this.firestore._delegate, this._userDataWriter, result._key, result._document, result.metadata, this._delegate.converter)));\n    return onSnapshot(this._delegate, options, observer);\n  }\n\n  get(options) {\n    let snap;\n\n    if ((options === null || options === void 0 ? void 0 : options.source) === 'cache') {\n      snap = getDocFromCache(this._delegate);\n    } else if ((options === null || options === void 0 ? void 0 : options.source) === 'server') {\n      snap = getDocFromServer(this._delegate);\n    } else {\n      snap = getDoc(this._delegate);\n    }\n\n    return snap.then(result => new DocumentSnapshot(this.firestore, new DocumentSnapshot$1(this.firestore._delegate, this._userDataWriter, result._key, result._document, result.metadata, this._delegate.converter)));\n  }\n\n  withConverter(converter) {\n    return new DocumentReference(this.firestore, converter ? this._delegate.withConverter(FirestoreDataConverter.getInstance(this.firestore, converter)) : this._delegate.withConverter(null));\n  }\n\n}\n/**\r\n * Replaces the function name in an error thrown by the firestore-exp API\r\n * with the function names used in the classic API.\r\n */\n\n\nfunction replaceFunctionName(e, original, updated) {\n  e.message = e.message.replace(original, updated);\n  return e;\n}\n/**\r\n * Iterates the list of arguments from an `onSnapshot` call and returns the\r\n * first argument that may be an `SnapshotListenOptions` object. Returns an\r\n * empty object if none is found.\r\n */\n\n\nfunction extractSnapshotOptions(args) {\n  for (const arg of args) {\n    if (typeof arg === 'object' && !isPartialObserver(arg)) {\n      return arg;\n    }\n  }\n\n  return {};\n}\n/**\r\n * Creates an observer that can be passed to the firestore-exp SDK. The\r\n * observer converts all observed values into the format expected by the classic\r\n * SDK.\r\n *\r\n * @param args - The list of arguments from an `onSnapshot` call.\r\n * @param wrapper - The function that converts the firestore-exp type into the\r\n * type used by this shim.\r\n */\n\n\nfunction wrapObserver(args, wrapper) {\n  var _a, _b;\n\n  let userObserver;\n\n  if (isPartialObserver(args[0])) {\n    userObserver = args[0];\n  } else if (isPartialObserver(args[1])) {\n    userObserver = args[1];\n  } else if (typeof args[0] === 'function') {\n    userObserver = {\n      next: args[0],\n      error: args[1],\n      complete: args[2]\n    };\n  } else {\n    userObserver = {\n      next: args[1],\n      error: args[2],\n      complete: args[3]\n    };\n  }\n\n  return {\n    next: val => {\n      if (userObserver.next) {\n        userObserver.next(wrapper(val));\n      }\n    },\n    error: (_a = userObserver.error) === null || _a === void 0 ? void 0 : _a.bind(userObserver),\n    complete: (_b = userObserver.complete) === null || _b === void 0 ? void 0 : _b.bind(userObserver)\n  };\n}\n\nclass DocumentSnapshot {\n  constructor(_firestore, _delegate) {\n    this._firestore = _firestore;\n    this._delegate = _delegate;\n  }\n\n  get ref() {\n    return new DocumentReference(this._firestore, this._delegate.ref);\n  }\n\n  get id() {\n    return this._delegate.id;\n  }\n\n  get metadata() {\n    return this._delegate.metadata;\n  }\n\n  get exists() {\n    return this._delegate.exists();\n  }\n\n  data(options) {\n    return this._delegate.data(options);\n  }\n\n  get(fieldPath, options // We are using `any` here to avoid an explicit cast by our users.\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ) {\n    return this._delegate.get(fieldPath, options);\n  }\n\n  isEqual(other) {\n    return snapshotEqual(this._delegate, other._delegate);\n  }\n\n}\n\nclass QueryDocumentSnapshot extends DocumentSnapshot {\n  data(options) {\n    const data = this._delegate.data(options);\n\n    _debugAssert(data !== undefined, 'Document in a QueryDocumentSnapshot should exist');\n\n    return data;\n  }\n\n}\n\nclass Query {\n  constructor(firestore, _delegate) {\n    this.firestore = firestore;\n    this._delegate = _delegate;\n    this._userDataWriter = new UserDataWriter(firestore);\n  }\n\n  where(fieldPath, opStr, value) {\n    try {\n      // The \"as string\" cast is a little bit of a hack. `where` accepts the\n      // FieldPath Compat type as input, but is not typed as such in order to\n      // not expose this via our public typings file.\n      return new Query(this.firestore, query(this._delegate, where(fieldPath, opStr, value)));\n    } catch (e) {\n      throw replaceFunctionName(e, /(orderBy|where)\\(\\)/, 'Query.$1()');\n    }\n  }\n\n  orderBy(fieldPath, directionStr) {\n    try {\n      // The \"as string\" cast is a little bit of a hack. `orderBy` accepts the\n      // FieldPath Compat type as input, but is not typed as such in order to\n      // not expose this via our public typings file.\n      return new Query(this.firestore, query(this._delegate, orderBy(fieldPath, directionStr)));\n    } catch (e) {\n      throw replaceFunctionName(e, /(orderBy|where)\\(\\)/, 'Query.$1()');\n    }\n  }\n\n  limit(n) {\n    try {\n      return new Query(this.firestore, query(this._delegate, limit(n)));\n    } catch (e) {\n      throw replaceFunctionName(e, 'limit()', 'Query.limit()');\n    }\n  }\n\n  limitToLast(n) {\n    try {\n      return new Query(this.firestore, query(this._delegate, limitToLast(n)));\n    } catch (e) {\n      throw replaceFunctionName(e, 'limitToLast()', 'Query.limitToLast()');\n    }\n  }\n\n  startAt() {\n    try {\n      return new Query(this.firestore, query(this._delegate, startAt(...arguments)));\n    } catch (e) {\n      throw replaceFunctionName(e, 'startAt()', 'Query.startAt()');\n    }\n  }\n\n  startAfter() {\n    try {\n      return new Query(this.firestore, query(this._delegate, startAfter(...arguments)));\n    } catch (e) {\n      throw replaceFunctionName(e, 'startAfter()', 'Query.startAfter()');\n    }\n  }\n\n  endBefore() {\n    try {\n      return new Query(this.firestore, query(this._delegate, endBefore(...arguments)));\n    } catch (e) {\n      throw replaceFunctionName(e, 'endBefore()', 'Query.endBefore()');\n    }\n  }\n\n  endAt() {\n    try {\n      return new Query(this.firestore, query(this._delegate, endAt(...arguments)));\n    } catch (e) {\n      throw replaceFunctionName(e, 'endAt()', 'Query.endAt()');\n    }\n  }\n\n  isEqual(other) {\n    return queryEqual(this._delegate, other._delegate);\n  }\n\n  get(options) {\n    let query;\n\n    if ((options === null || options === void 0 ? void 0 : options.source) === 'cache') {\n      query = getDocsFromCache(this._delegate);\n    } else if ((options === null || options === void 0 ? void 0 : options.source) === 'server') {\n      query = getDocsFromServer(this._delegate);\n    } else {\n      query = getDocs(this._delegate);\n    }\n\n    return query.then(result => new QuerySnapshot(this.firestore, new QuerySnapshot$1(this.firestore._delegate, this._userDataWriter, this._delegate, result._snapshot)));\n  }\n\n  onSnapshot() {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    const options = extractSnapshotOptions(args);\n    const observer = wrapObserver(args, snap => new QuerySnapshot(this.firestore, new QuerySnapshot$1(this.firestore._delegate, this._userDataWriter, this._delegate, snap._snapshot)));\n    return onSnapshot(this._delegate, options, observer);\n  }\n\n  withConverter(converter) {\n    return new Query(this.firestore, converter ? this._delegate.withConverter(FirestoreDataConverter.getInstance(this.firestore, converter)) : this._delegate.withConverter(null));\n  }\n\n}\n\nclass DocumentChange {\n  constructor(_firestore, _delegate) {\n    this._firestore = _firestore;\n    this._delegate = _delegate;\n  }\n\n  get type() {\n    return this._delegate.type;\n  }\n\n  get doc() {\n    return new QueryDocumentSnapshot(this._firestore, this._delegate.doc);\n  }\n\n  get oldIndex() {\n    return this._delegate.oldIndex;\n  }\n\n  get newIndex() {\n    return this._delegate.newIndex;\n  }\n\n}\n\nclass QuerySnapshot {\n  constructor(_firestore, _delegate) {\n    this._firestore = _firestore;\n    this._delegate = _delegate;\n  }\n\n  get query() {\n    return new Query(this._firestore, this._delegate.query);\n  }\n\n  get metadata() {\n    return this._delegate.metadata;\n  }\n\n  get size() {\n    return this._delegate.size;\n  }\n\n  get empty() {\n    return this._delegate.empty;\n  }\n\n  get docs() {\n    return this._delegate.docs.map(doc => new QueryDocumentSnapshot(this._firestore, doc));\n  }\n\n  docChanges(options) {\n    return this._delegate.docChanges(options).map(docChange => new DocumentChange(this._firestore, docChange));\n  }\n\n  forEach(callback, thisArg) {\n    this._delegate.forEach(snapshot => {\n      callback.call(thisArg, new QueryDocumentSnapshot(this._firestore, snapshot));\n    });\n  }\n\n  isEqual(other) {\n    return snapshotEqual(this._delegate, other._delegate);\n  }\n\n}\n\nclass CollectionReference extends Query {\n  constructor(firestore, _delegate) {\n    super(firestore, _delegate);\n    this.firestore = firestore;\n    this._delegate = _delegate;\n  }\n\n  get id() {\n    return this._delegate.id;\n  }\n\n  get path() {\n    return this._delegate.path;\n  }\n\n  get parent() {\n    const docRef = this._delegate.parent;\n    return docRef ? new DocumentReference(this.firestore, docRef) : null;\n  }\n\n  doc(documentPath) {\n    try {\n      if (documentPath === undefined) {\n        // Call `doc` without `documentPath` if `documentPath` is `undefined`\n        // as `doc` validates the number of arguments to prevent users from\n        // accidentally passing `undefined`.\n        return new DocumentReference(this.firestore, doc(this._delegate));\n      } else {\n        return new DocumentReference(this.firestore, doc(this._delegate, documentPath));\n      }\n    } catch (e) {\n      throw replaceFunctionName(e, 'doc()', 'CollectionReference.doc()');\n    }\n  }\n\n  add(data) {\n    return addDoc(this._delegate, data).then(docRef => new DocumentReference(this.firestore, docRef));\n  }\n\n  isEqual(other) {\n    return refEqual(this._delegate, other._delegate);\n  }\n\n  withConverter(converter) {\n    return new CollectionReference(this.firestore, converter ? this._delegate.withConverter(FirestoreDataConverter.getInstance(this.firestore, converter)) : this._delegate.withConverter(null));\n  }\n\n}\n\nfunction castReference(documentRef) {\n  return _cast(documentRef, DocumentReference$1);\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n// The objects that are a part of this API are exposed to third-parties as\n// compiled javascript so we want to flag our private members with a leading\n// underscore to discourage their use.\n\n/**\r\n * A `FieldPath` refers to a field in a document. The path may consist of a\r\n * single field name (referring to a top-level field in the document), or a list\r\n * of field names (referring to a nested field in the document).\r\n */\n\n\nclass FieldPath {\n  /**\r\n   * Creates a FieldPath from the provided field names. If more than one field\r\n   * name is provided, the path will point to a nested field in a document.\r\n   *\r\n   * @param fieldNames - A list of field names.\r\n   */\n  constructor() {\n    for (var _len6 = arguments.length, fieldNames = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      fieldNames[_key6] = arguments[_key6];\n    }\n\n    this._delegate = new FieldPath$1(...fieldNames);\n  }\n\n  static documentId() {\n    /**\r\n     * Internal Note: The backend doesn't technically support querying by\r\n     * document ID. Instead it queries by the entire document name (full path\r\n     * included), but in the cases we currently support documentId(), the net\r\n     * effect is the same.\r\n     */\n    return new FieldPath(_FieldPath.keyField().canonicalString());\n  }\n\n  isEqual(other) {\n    other = getModularInstance(other);\n\n    if (!(other instanceof FieldPath$1)) {\n      return false;\n    }\n\n    return this._delegate._internalPath.isEqual(other._internalPath);\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass FieldValue {\n  constructor(_delegate) {\n    this._delegate = _delegate;\n  }\n\n  static serverTimestamp() {\n    const delegate = serverTimestamp();\n    delegate._methodName = 'FieldValue.serverTimestamp';\n    return new FieldValue(delegate);\n  }\n\n  static delete() {\n    const delegate = deleteField();\n    delegate._methodName = 'FieldValue.delete';\n    return new FieldValue(delegate);\n  }\n\n  static arrayUnion() {\n    const delegate = arrayUnion(...arguments);\n    delegate._methodName = 'FieldValue.arrayUnion';\n    return new FieldValue(delegate);\n  }\n\n  static arrayRemove() {\n    const delegate = arrayRemove(...arguments);\n    delegate._methodName = 'FieldValue.arrayRemove';\n    return new FieldValue(delegate);\n  }\n\n  static increment(n) {\n    const delegate = increment(n);\n    delegate._methodName = 'FieldValue.increment';\n    return new FieldValue(delegate);\n  }\n\n  isEqual(other) {\n    return this._delegate.isEqual(other._delegate);\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst firestoreNamespace = {\n  Firestore,\n  GeoPoint,\n  Timestamp,\n  Blob,\n  Transaction,\n  WriteBatch,\n  DocumentReference,\n  DocumentSnapshot,\n  Query,\n  QueryDocumentSnapshot,\n  QuerySnapshot,\n  CollectionReference,\n  FieldPath,\n  FieldValue,\n  setLogLevel,\n  CACHE_SIZE_UNLIMITED\n};\n/**\r\n * Configures Firestore as part of the Firebase SDK by calling registerComponent.\r\n *\r\n * @param firebase - The FirebaseNamespace to register Firestore with\r\n * @param firestoreFactory - A factory function that returns a new Firestore\r\n *    instance.\r\n */\n\nfunction configureForFirebase(firebase, firestoreFactory) {\n  firebase.INTERNAL.registerComponent(new Component('firestore-compat', container => {\n    const app = container.getProvider('app-compat').getImmediate();\n    const firestoreExp = container.getProvider('firestore').getImmediate();\n    return firestoreFactory(app, firestoreExp);\n  }, 'PUBLIC').setServiceProps(Object.assign({}, firestoreNamespace)));\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Registers the main Firestore build with the components framework.\r\n * Persistence can be enabled via `firebase.firestore().enablePersistence()`.\r\n */\n\n\nfunction registerFirestore(instance) {\n  configureForFirebase(instance, (app, firestoreExp) => new Firestore(app, firestoreExp, new IndexedDbPersistenceProvider()));\n  instance.registerVersion(name, version);\n}\n\nregisterFirestore(firebase);\nexport { registerFirestore };","map":{"version":3,"mappings":"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","names":["validateSetOptions","methodName","options","undefined","merge","mergeFields","FirestoreError","assertUint8ArrayAvailable","Uint8Array","assertBase64Available","_isBase64Available","Blob","constructor","_delegate","fromBase64String","base64","Bytes","fromUint8Array","array","toBase64","toUint8Array","isEqual","other","toString","isPartialObserver","obj","implementsAnyMethods","methods","object","method","IndexedDbPersistenceProvider","enableIndexedDbPersistence","firestore","forceOwnership","enableMultiTabIndexedDbPersistence","clearIndexedDbPersistence","Firestore","databaseIdOrApp","_persistenceProvider","delete","terminate","_DatabaseId","_appCompat","_databaseId","settings","settingsLiteral","currentSettings","_getSettings","host","_logWarn","_setSettings","useEmulator","port","connectFirestoreEmulator","enableNetwork","disableNetwork","enablePersistence","synchronizeTabs","experimentalForceOwningTab","_validateIsNotUsedTogether","clearPersistence","_removeServiceInstance","_delete","waitForPendingWrites","onSnapshotsInSync","arg","app","collection","pathString","CollectionReference","e","replaceFunctionName","doc","DocumentReference","collectionGroup","collectionId","Query","runTransaction","updateFunction","transaction","Transaction","batch","ensureFirestoreConfigured","WriteBatch","ExpWriteBatch","mutations","executeWrite","loadBundle","bundleData","namedQuery","name","then","expQuery","UserDataWriter","AbstractUserDataWriter","convertBytes","bytes","convertReference","key","convertDocumentKey","forKey","setLogLevel","level","setClientLogLevel","_firestore","_userDataWriter","get","documentRef","ref","castReference","result","DocumentSnapshot","ExpDocumentSnapshot","_key","_document","metadata","converter","set","data","update","dataOrField","value","moreFieldsAndValues","arguments","length","commit","FirestoreDataConverter","fromFirestore","snapshot","expSnapshot","ExpQueryDocumentSnapshot","QueryDocumentSnapshot","toFirestore","modelObject","getInstance","converterMapByFirestore","INSTANCES","untypedConverterByConverter","WeakMap","instance","forPath","path","canonicalString","ExpDocumentReference","_DocumentKey","id","parent","getModularInstance","refEqual","setDoc","fieldOrUpdateData","updateDoc","deleteDoc","onSnapshot","args","extractSnapshotOptions","observer","wrapObserver","snap","source","getDocFromCache","getDocFromServer","getDoc","withConverter","original","updated","message","replace","wrapper","userObserver","next","error","complete","val","_a","bind","_b","exists","fieldPath","snapshotEqual","_debugAssert","where","opStr","query","orderBy","directionStr","limit","n","limitToLast","startAt","startAfter","endBefore","endAt","queryEqual","getDocsFromCache","getDocsFromServer","getDocs","QuerySnapshot","ExpQuerySnapshot","_snapshot","DocumentChange","type","oldIndex","newIndex","size","empty","docs","map","docChanges","docChange","forEach","callback","thisArg","call","docRef","documentPath","add","addDoc","_cast","FieldPath","fieldNames","ExpFieldPath","documentId","InternalFieldPath","keyField","_internalPath","FieldValue","serverTimestamp","delegate","_methodName","deleteField","arrayUnion","arrayRemove","increment","firestoreNamespace","GeoPoint","Timestamp","CACHE_SIZE_UNLIMITED","configureForFirebase","firebase","firestoreFactory","INTERNAL","registerComponent","Component","container","getProvider","getImmediate","firestoreExp","setServiceProps","Object","registerFirestore","registerVersion","version"],"sources":["."],"sourcesContent":["/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport firebase from '@firebase/app-compat';\nimport type { FirebaseNamespace } from '@firebase/app-types';\nimport * as types from '@firebase/firestore-types';\n\nimport { name, version } from '../package.json';\n\nimport { Firestore, IndexedDbPersistenceProvider } from './api/database';\nimport { configureForFirebase } from './config';\n\nimport './register-module';\n\n/**\n * Registers the main Firestore build with the components framework.\n * Persistence can be enabled via `firebase.firestore().enablePersistence()`.\n */\nexport function registerFirestore(instance: FirebaseNamespace): void {\n  configureForFirebase(\n    instance,\n    (app, firestoreExp) =>\n      new Firestore(app, firestoreExp, new IndexedDbPersistenceProvider())\n  );\n  instance.registerVersion(name, version);\n}\n\nregisterFirestore(firebase as unknown as FirebaseNamespace);\n\ndeclare module '@firebase/app-compat' {\n  interface FirebaseNamespace {\n    firestore: {\n      (app?: FirebaseApp): types.FirebaseFirestore;\n      Blob: typeof types.Blob;\n      CollectionReference: typeof types.CollectionReference;\n      DocumentReference: typeof types.DocumentReference;\n      DocumentSnapshot: typeof types.DocumentSnapshot;\n      FieldPath: typeof types.FieldPath;\n      FieldValue: typeof types.FieldValue;\n      Firestore: typeof types.FirebaseFirestore;\n      GeoPoint: typeof types.GeoPoint;\n      Query: typeof types.Query;\n      QueryDocumentSnapshot: typeof types.QueryDocumentSnapshot;\n      QuerySnapshot: typeof types.QuerySnapshot;\n      Timestamp: typeof types.Timestamp;\n      Transaction: typeof types.Transaction;\n      WriteBatch: typeof types.WriteBatch;\n      setLogLevel: typeof types.setLogLevel;\n    };\n  }\n  interface FirebaseApp {\n    firestore?(): types.FirebaseFirestore;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}